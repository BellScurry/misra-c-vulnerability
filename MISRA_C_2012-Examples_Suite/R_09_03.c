/*
 * Release: 2014-01-13
 *
 * Example from MISRA C:2012  (  THIS IS NOT A TEST SUITE  )
 *
 * Copyright MIRA Limited.
 *
 * See file READ_ME.txt for full copyright, license and release instructions.
 */

/*
 * R.9.3
 *
 * Arrays shall not be partially initialized 
 */

#include "mc3_types.h"
#include "mc3_header.h"

#define PI 3.14f

void R_9_3 (  void  )
{
   int32_t x[ 3 ] = { 0, 1, 2 };                     /* Compliant                                               */
   int32_t y[ 3 ] = { 0, 1 };                        /* Non-compliant: y[ 2 ] is implicitly initialised           */

   float32_t t[ 4 ]  = { [ 1 ] = 1.0f, 2.0f };           /* Non-compliant: t[ 0 ] and t[ 3 ] are implicitly initialised */
   float32_t z[ 50 ] = { [ 1 ] = 1.0f, [ 25 ] = 2.0f };  /* Compliant: designated initialisers for sparse matrix    */

   float32_t arr[ 3 ][ 2 ] =
   {
      { 0.0f, 0.0f },
      { PI / 4.0f, -PI / 4.0f },
      { 0 }                           /* { 0 } initialises all elements of array subobject arr[ 3 ]  */
   };

   char h[ 10 ] = "Hello";            /* Compliant by exception */

   use_char ( h[ 0 ] );
   use_int32 ( x[ 0 ] );
   use_int32 ( y[ 0 ] );
   use_float32 ( t[ 0 ] );
   use_float32 ( z[ 0 ] );
   use_float32 ( arr[ 0 ][ 0 ] );

}
/* end of R_09_03.c */
