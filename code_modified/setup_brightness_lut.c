#include "susan.h"

/****   MiBench ****/
void setup_brightness_lut(unsigned char **bp, int thresh, int form) {
    
    int   k;
    float temp;

    *bp=(unsigned char *)malloc(516);
    *bp=*bp+258;

    for(k=-256;k<257;k++) {
    
        temp=((float)k)/((float)thresh);
        temp=temp*temp;
        if (form==6)
            temp=temp*temp*temp;
        
        temp=100.0*exp(-temp);
        *(*bp+k)= (unsigned char)temp;
    }
}


/****   MISRA C ****/
void misrac_setup_brightness_lut(unsigned char *buffptr, int thresh, int form) {

    /**  buffptr: fixed size (516) array */
    int   j;        //  j <- (k+258)
    float temp;

   for (j=2 ; j < 515 ; j++) {

        temp = ((float)(j-258)) / ((float)thresh);
        temp = temp * temp;
        if (form == 6)
            temp = temp * temp * temp;
 
        temp = 100.0 * exp(-temp);
        *(buffptr+j) = (unsigned char)temp;
    }   
}
