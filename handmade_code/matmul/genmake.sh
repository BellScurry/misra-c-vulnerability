#!/bin/bash

CC="arm-linux-gnueabi-gcc"

for row_size1 in 10
do
    for col_size1 in 10
    do
        row_size2=$col_size1
        for col_size2 in 10 
        do
            size="${row_size1}x${col_size1}_${row_size2}x${col_size2}"
            size_opt="-D__ROW_SIZE_1__=${row_size1} -D__COL_SIZE_1__=${col_size1}"
            size_opt="$size_opt -D__ROW_SIZE_2__=${row_size2} -D__COL_SIZE_2__=${col_size2}"

            # Target 1: Normal Code
            target1="double_matmul_${size}_ARM"
            rule1="$CC -static $size_opt double_matmul.c -o ${target1}"

            # Target 2: MISRA C Code
            target2="double_matmul_${size}_misrac_ARM"
            rule2="$CC -static $size_opt -D__MISRA_C__ double_matmul.c -o ${target2}"

            executable="$executable $target1 $target2"
            recipe="$recipe\n$target1:\n\t$rule1\n$target2:\n\t$rule2"
        done
    done
done

echo -e "executable=$executable\n\nall: $executable"
echo -e "$recipe\n"
echo -e "clean:\n\trm \$(executable)"
