#!/bin/bash

CURRENT=$(dirname $0)
SCRIPT_HOME=~/misra-c-vulnerability/script
source $SCRIPT_HOME/stat_to_csv.sh
source $SCRIPT_HOME/concat_csv.sh
source $SCRIPT_HOME/make_digest.sh

txt_list=($(ls $CURRENT/output/gemv_config*/bench_config*/stats.txt))

for file in ${txt_list[@]}
do
    csv_file="$(dirname $file)/stats.csv"
    digest_file="$(dirname $file)/digest.csv"
    stat_to_csv $file > $csv_file
    make_digest $csv_file > $digest_file
    csv_list="$csv_list $csv_file"
    digest_list="$digest_list $digest_file"
done

echo $csv_list
echo $digest_list
#concat_csv $csv_list
