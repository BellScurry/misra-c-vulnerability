import os.path
import sys, argparse
import subprocess
import re

# For regex
RE_CAPITAL = re.compile(r"[A-Z]*")
RE_SHELLVAR = re.compile(r"\$.*")

# If directory structure is same with the structure in README,
# we can guess the project home.
# Thus, we can guess pathinfo.csv and then,
# we can find out gemV home & baseline configurations also
PROJECT_HOME = os.path.dirname(os.path.realpath(__file__)) + "/.."
# TODO: <project home>/pathinfo.csv -> Guess GEMV_HOME
# TODO: GEMV_HOME = 
SIM_SCRIPT = GEMV_HOME + "/configs/example/se.py"
BASELINE_CONFIG = GEMV_HOME + "config/Baseline.csv"

# TODO: read_baseline()
#       - Read <project home>/config/Baseline.csv

def csv_to_gemv_option(csvfile):
    # TODO: gemv_opt=blahblah, script_opt=blahblah
    # TODO: return gemv_opt + script_opt
    return None


def concat_gemv_option(opt1, opt2):
    # <GEMV BINARY> <gemV option> <GEMV SCRIPT> <script option>
    # TODO:
    return None
 

def run(workload_info, outpath):
    # TODO: read_config()
    #       - Read configN.csv
    # TODO: read_workload_info()
    #       - Read workloadN.csv
    # TODO: AFTER SIM, Digest.csv
    # TODO: AFTER SIM, Group.csv
    return None


if __name__ == '__main__':
    arglist = argparse.ArgumentParser()

    # Positional Arguments: (workload info, output path)
    arglist.add_argument("-w", metavar="<workload info>", nargs="+", action="append", help="List of workload info paths")
    arglist.add_argument("-o", metavar="<output path>", nargs="+", action="append", help="List of output paths")

    # Finish Argument Parsing
    args = arglist.parse_args()

    print(args.w)
