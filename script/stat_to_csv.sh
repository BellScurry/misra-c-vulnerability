#!/bin/bash

# Usage
# - $1: Stat File
# - Read stat file, then echo in csv format.
stat_to_csv() {

    if [[ "$#" -ne 1 ]]; then
        >&2 echo "Wrong number of arguments passed to function stat_to_csv()"
        return 1
    fi

    sed $1 \
        -e '/^.*\(Begin\|End\).*$/d' \
        -e '/^[[:space:]]*$/d' \
        -e 's/#.*$//' \
        -e 's/^[[:space:]]\+//' \
        -e 's/[[:space:]]\+$//' \
        -e 's/[[:space:]]\+/, /g'
}
